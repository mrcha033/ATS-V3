# ATS-V3 (Automated Trading System Version 3)

C++ 기반의 고성능 자산 아비트라지 거래 시스템입니다. 여러 암호화폐 거래소 간의 실시간 가격 차이를 활용하여 자동화된 무위험 거래를 수행하며, 견고한 아키텍처와 고급 보안 기능을 제공합니다.

## 주요 기능

- 🔄 **다중 거래소 가격 모니터링**: WebSocket 및 REST API를 통해 여러 암호화폐 거래소의 실시간 시장 데이터를 수집하고 분석합니다. (Binance, Upbit, Coinbase, Kraken, Bitfinex 지원)
- ⚡ **자동 거래 엔진**: 탐지된 아비트라지 기회에 대해 여러 거래소에 걸쳐 동시에 주문을 실행하는 고성능 거래 엔진입니다. 실패 시 롤백 및 복구 메커니즘을 포함합니다.
- 🛡️ **실시간 리스크 관리**: 포트폴리오 노출, 포지션 집중도, P&L 한도 및 VaR(Value at Risk)를 포함한 실시간 리스크 지표를 모니터링합니다. 임계값 위반 시 자동 거래 중단 및 경고를 트리거합니다.
- 📊 **백테스트 & 시뮬레이션**: 과거 시장 데이터를 사용하여 거래 전략을 검증하고 최적화합니다. AI 기반 예측 모델 통합을 지원하여 전략 성능을 향상시킵니다.
- 📈 **대시보드**: Qt/QML 기반의 직관적인 사용자 인터페이스를 통해 실시간 P&L, 포트폴리오 현황, 거래 내역, 시스템 상태 및 알림을 시각화합니다.
- 🔔 **고급 알림 시스템**: 사용자 정의 가능한 규칙 및 채널(이메일, 푸시 알림)을 통해 중요한 시스템 이벤트, 거래 실행 및 리스크 경고를 전달합니다.
- 🔒 **강력한 보안**: API 키 암호화, 역할 기반 접근 제어(RBAC), 2단계 인증(2FA), 안전한 통신(TLS)을 포함한 포괄적인 보안 기능을 제공합니다.

## 아키텍처 개요

ATS-V3는 마이크로서비스 지향 아키텍처로 설계되어 각 핵심 기능이 독립적인 모듈로 분리되어 있습니다. 이 모듈들은 고성능 gRPC, WebSocket 및 Redis Pub/Sub을 통해 통신하며, 확장성, 복원력 및 유지보수성을 극대화합니다.

```
+-------------------+     +-------------------+     +-------------------+
|   Price Collector |---->|   Trading Engine  |<----|   Risk Manager    |
| (Market Data)     |     | (Arbitrage Logic) |     | (Risk Control)    |
+-------------------+     +-------------------+     +-------------------+
         ^                         ^                         ^
         |                         |                         |
         | (Redis Pub/Sub)         | (gRPC)                  | (gRPC)
         v                         v                         v
+-------------------+     +-------------------+     +-------------------+
|   UI Dashboard    |<----|   Notification    |<----|   Backtest        |
| (Visualization)   |     | (Alerts)          |     | (Strategy Eval)   |
+-------------------+     +-------------------+     +-------------------+
         ^                         ^
         |                         |
         +-------------------------+
              (Shared Libraries, Security, Monitoring)
```

## 모듈 구성

-   **`shared/`**: 시스템 전반에 걸쳐 사용되는 공통 라이브러리 및 유틸리티를 포함합니다. 여기에는 핵심 데이터 타입, 설정 관리, 로깅, 암호화 유틸리티, 그리고 복원력 있는 거래소 통합 프레임워크(플러그인 아키텍처, 페일오버, 서킷 브레이커)가 포함됩니다.
-   **`price_collector/`**: 다양한 거래소로부터 실시간 시장 데이터(호가, 티커, 거래)를 수집하고 정규화합니다. `shared` 모듈의 거래소 통합 프레임워크를 활용하며, 수집된 데이터는 InfluxDB에 저장됩니다.
-   **`trading_engine/`**: 아비트라지 기회를 탐지하고 실행하는 핵심 로직을 담당합니다. 주문 라우팅, 동시 주문 실행, 거래 실행 모니터링, 그리고 실패한 거래에 대한 롤백 메커니즘을 관리합니다.
-   **`risk_manager/`**: 실시간으로 포트폴리오 리스크를 모니터링하고 관리합니다. 노출 한도, P&L 임계값, VaR 계산 및 자동 거래 중단 기능을 포함합니다.
-   **`backtest_analytics/`**: 과거 시장 데이터를 사용하여 거래 전략을 시뮬레이션하고 성능을 분석합니다. AI 예측 모델과의 통합을 위한 프레임워크를 제공합니다.
-   **`notification_service/`**: 사용자 정의 가능한 규칙 및 채널(이메일, 푸시 알림)을 통해 시스템 알림을 관리하고 전송합니다.
-   **`security/`**: 인증, 권한 부여(RBAC), 암호화, TLS 통신 및 2단계 인증(2FA)을 포함한 시스템의 모든 보안 측면을 처리합니다.
-   **`ui_dashboard/`**: Qt/QML 기반의 사용자 친화적인 GUI를 제공하여 시스템 상태, 시장 데이터, 포트폴리오 및 거래 활동을 시각화하고 제어합니다.

## 시스템 요구사항

-   C++17 이상
-   CMake 3.16+
-   Conan 패키지 매니저
-   Docker & Docker Compose (권장)
-   Qt6 (UI 대시보드 빌드 시)

## 빌드 및 실행

ATS-V3는 Docker를 사용하여 쉽게 배포하고 실행할 수 있도록 설계되었습니다.

### 1. 의존성 설치 (로컬 빌드 시)

```bash
# Conan 패키지 설치
conan install . --build=missing

# CMake 빌드
mkdir build && cd build
cmake .. -DCMAKE_BUILD_TYPE=Release
make -j$(nproc)
```

### 2. Docker Compose로 전체 시스템 실행 (권장)

```bash
# Docker Compose로 모든 서비스(ATS-V3, Redis, InfluxDB, Prometheus, Grafana) 실행
docker-compose up -d
```

### 3. 설정

시스템 설정은 `config/settings.json` 파일을 통해 관리됩니다. 이 파일에는 거래소 API 키, 데이터베이스 연결 정보, 리스크 한도 및 기타 운영 매개변수가 포함됩니다.

```bash
# 설정 파일 복사 (예시 파일에서 시작)
cp config/settings.json.example config/settings.json

# API 키 및 거래소 설정 편집 (필요에 따라 암호화된 설정 사용)
vim config/settings.json
```

**참고**: `settings.json` 파일은 민감한 정보를 포함할 수 있으므로, `security` 모듈의 암호화 기능을 사용하여 안전하게 관리하는 것이 좋습니다.

## 모니터링

ATS-V3는 Prometheus와 Grafana를 통합하여 포괄적인 시스템 모니터링 기능을 제공합니다.

-   **Prometheus**: 각 서비스에서 노출하는 메트릭을 수집합니다.
-   **Grafana**: 수집된 메트릭을 기반으로 실시간 대시보드를 제공하여 시스템 성능, 리스크 지표 및 거래 활동을 시각적으로 모니터링할 수 있습니다.

## 확장성

ATS-V3는 새로운 거래소 또는 시장 데이터 소스를 쉽게 통합할 수 있도록 플러그인 아키텍처를 지원합니다. `shared` 모듈의 `IExchangePlugin` 인터페이스를 구현하여 새로운 어댑터를 추가할 수 있습니다.

## 라이센스

이 프로젝트는 MIT 라이센스 하에 배포됩니다.
